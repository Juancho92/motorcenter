<div id="clientQuotes">
  <form [formGroup]="QuoteFormGroup">
    <div class="formContainer" [formArrayName]="'formArrayName'">
      <mat-card class="quoteCard" *ngFor="let quote of clientQuotes; let i = index">
        <mat-card-header>
          <mat-card-title>{{quote.vehicleName}}</mat-card-title>
          <button mat-icon-button aria-label="Descargar cotización">
            <mat-icon>cloud_download</mat-icon>
          </button>
          <button mat-icon-button id="{{'saveIconBtn-' + i}}" aria-label="Guardar información" class="save" *ngIf="vehicleIndex === i? displaySaveBtn : false" (click)="saveEditedQuote(i)">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button aria-label="Editar información" class="edit" (click)="enableEditing(i)">
            <mat-icon>{{vehicleIndex === i? formVehicleButton : 'edit'}}</mat-icon>
          </button>
        </mat-card-header>
        <mat-card-content>
          <div [formGroupName]="i">
            <mat-form-field class="info executive">
              <mat-label>Ejecutivo a cargo</mat-label>
              <mat-icon matTooltip="Más información sobre el kilometraje" matTooltipPosition="after" aria-label="Información del ejecutivo de ventas" (click)="sellerInfo(i)">person_search</mat-icon>
              <input matInput placeholder="Nombre del ejecutivo comercial" value="{{quote.quoteExecutive[0].name}}" readonly>
            </mat-form-field>
            <mat-form-field class="info price">
              <mat-label>Precio de separación</mat-label>
              <mat-icon matTooltip="Más información sobre el kilometraje" matTooltipPosition="after" aria-label="Información sobre el precio" (click)="priceInfo()">info</mat-icon>
              <input matInput placeholder="Precio de separación" value="{{quote.vehiclePrice}}" readonly>
            </mat-form-field>
            <mat-form-field class="version" floatLabel="always">
              <mat-label>Versión</mat-label>
              <mat-select formControlName="versionFormControl" class="readonly">
                <mat-option [value]="version.selected ? 'default' : version.description" *ngFor="let version of quote.vehicleVersions; let i = index">{{version.description}}</mat-option>
              </mat-select>
            </mat-form-field>
            <app-color-picker *ngIf="vehicleIndex === i? showColorPalette : false" class="cdk-overlay-container" [position]="colorPickerPosition" [color]="colorDetails" (colorData)="setColor($event, i)" (close)="closeColorPicker($event)"></app-color-picker>
            <mat-form-field class="color" floatLabel="always">
              <mat-label>Color</mat-label>
              <button mat-icon-button aria-label="Mostrar selección de color" (click)="openColorPicker(i)" [disabled]="vehicleIndex === i? enableReadonly : true">
                <mat-icon>palette</mat-icon>
              </button>
              <input matInput id="{{'colorPickerInput-' + i}}" formControlName="colorFormControl" placeholder="Color del vehículo" (click)="openColorPicker(i)" readonly>
            </mat-form-field>
          </div>
          <div class="vehicleExtras">
            <div class="vehiclePic">
            </div>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-stroked-button *ngIf="!quoteStatus" class="cancelBtn">
            <div class="bg-gradient"></div>
            <span>CANCELAR</span>
          </button>
          <button mat-raised-button *ngIf="!quoteStatus" color="primary" class="acceptBtn" disabled>
            <div class="bg-gradient"></div>
            <span>SEPARAR</span>
          </button>
          <button *ngIf="quoteStatus" color="primary" class="cancelBtn" mat-raised-button class="storyBtn">
            <div class="bg-gradient"></div>
            <span>VER ESTADO DE COMPRA</span>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </form>
</div>
